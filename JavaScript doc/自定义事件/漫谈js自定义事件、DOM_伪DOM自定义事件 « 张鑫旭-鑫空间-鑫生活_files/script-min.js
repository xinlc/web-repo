(function(){"use strict";var e={$:function(e){return document.getElementById(e)},hd:function(e){e.style.display="none"},sh:function(e){e.style.display="block"}};var t=e.$("footYYShow"),i=e.$("footYyX"),n=e.$("footYYOff"),a=e.$("footYYClose");t.onclick=function(){e.sh(i);return false};n.onclick=function(){e.hd(i);return false};a.onclick=function(){e.hd(i);return false};var o=e.$("page");e.$("backToTop").onclick=function(){document.documentElement.scrollTop=0;document.body.scrollTop=0;return false};var r=e.$("content").getElementsByTagName("img"),l=r.length;var s=[];for(var c=0;c<l;c++){if(!r[c].src){s.push({src:r[c].getAttribute("data-src"),obj:r[c]})}}if(o){var d=function(){for(var e=0;e<s.length;e++){if(s[e].src){var t=s[e].obj.getBoundingClientRect();if(t.top>t.top-t.bottom&&t.top<(window.innerHeight||screen.availHeight-40)){s[e].obj.src=s[e].src;s[e].src=""}}}};o.onscroll=function(){d()};document.onscroll=function(){d()};d()}var f=e.$("content").getElementsByTagName("div"),u=f.length,m,p,v;for(var y=0;y<u;y+=1){if(!m&&(f[y].className==="similarity"||f[y].className==="wp_share_box")){m=f[y]}}if(m&&screen.width>640){var h=m.previousElementSibling;if(h&&/本篇/.test(h.innerHTML)){h.innerHTML+='<span class="ins_txt">// 有话要说？点击<a href="#comment" title="点击定位到评论">这里</a>。想要打赏？点击<a href="javascript:" id="alipayA" title="点击显示二维码">这里</a>？</span>';e.$("alipayA").onclick=function(){var t=e.$("payOverlay");if(t){t.style.display="block"}else{document.body.insertAdjacentHTML("beforeEnd",'<div id="payOverlay" class="yw_overlay" onclick="this.style.display=\'none\';"><div class="alipay_support"><strong>支付宝<span style="margin:0 82px;"></span>微&nbsp;&nbsp;信</strong><div class="alipay_img"><img src="http://www.zhangxinxu.com/alipay.png"> <img src="http://www.zhangxinxu.com/wxpay.png"></div></div></div>')}if(window._gaq){_gaq.push(["_trackEvent","PAY","click","will overlay"])}}}v=e.$("adHaiTang");if(v){m.parentNode.insertBefore(v,m)}}else if(m){var g=document.createElement("p");g.className="ad_no_away";g.innerHTML="//zxx: 别走开，后面还有精彩评论！";m.parentNode.insertBefore(g,m)}if(document.querySelectorAll){var T=document.querySelectorAll(".entry > p > a");for(var b=0;b<T.length;b++){if(T[b].parentNode.className!="link"){T[b].target="_blank"}}}var w=e.$("commentform"),N=e.$("submit");if(w&&N){var $=w.querySelector("#author"),H=w.querySelector("#email"),L=w.querySelector("#url"),x=w.querySelector("#comment");var _="placeholder";if(screen.width<640&&w.classList){w.classList.add("mobile");if($){$.setAttribute(_,"名称(必须)")}if(H){H.setAttribute(_,"邮箱(必须)")}if(L){L.setAttribute(_,"网站(可选)")}if(x){x.setAttribute(_,"评论内容(必须)")}}N.insertAdjacentHTML("afterend",'<span id="commRem" class="ml20" style="color:#cd0000;"></span>');var S=e.$("commRem");if("".trim&&$&&H&&L&&x){w.addEventListener("submit",function(e){var t=true;if($.value.trim()==""){S.innerHTML="名称还没填写";t=false}else if(H.value.trim()==""){S.innerHTML="邮箱还没填写";t=false}else if(x.value.trim()==""){S.innerHTML="评论内容还没填写";t=false}if(t==false){e.preventDefault();return false}S.style.color="";S.innerHTML="正在提交中..."});w.addEventListener("input",function(){S.innerHTML=""})}if(document.querySelector){var k=document.querySelector("h3.respond_title");if(k){k.innerHTML=k.innerHTML.replace(/\s+/g,"")}}}if([].map&&screen.width>640){var M=document.querySelector(".top_ad_out"),E=e.$("sidebar");if(M&&E){var q=E.clientHeight+E.offsetTop,A=E.offsetTop;var Y=M.offsetTop-10;document.addEventListener("scroll",function(){var e=this.body.scrollTop||this.documentElement.scrollTop||0;var t=this.documentElement.clientWidth;if(t>=1600&&e>=Y||t<1600&&e>q){M.style.position="fixed";if(t>=1600){M.style.top=10-.2*(e-Y)+"px"}else{M.style.top="10px"}}else{M.style.position="";M.style.top=""}if(e>q&&t>=1600){M.style.left="auto";M.style.top="10px";M.style.right="10px"}else{M.style.left="";M.style.right=""}})}}var C=e.$("shinkSlide"),B=e.$("page"),j=window.localStorage;if(C&&B&&screen.width<1680){C.style.display="inline";C.onclick=function(){var e=B.className,t=this.title;if(/slide_hide/.test(e)){B.className=(" "+e+" ").replace(/\s+slide_hide\s+/,"");this.title=t.replace("展开","收起");this.innerHTML="&#x25ba;";if(j){localStorage.removeItem("slideHideTime")}}else{B.className=e+" slide_hide";this.title=t.replace("收起","展开");this.innerHTML="&#x25c4;";if(j){localStorage.setItem("slideHideTime",+new Date)}}this.blur();return false}}var D=e.$("footbar");var I=function(t,i){var n=e.$(t),a=n.eleClone;if(!a){a=n.cloneNode(true);a.id=t+"Float";a.className+=" hidden";n.eleClone=a;document.body.appendChild(a);a.onmouseover=function(e){e=e||window.event;var t=e.target;if(t&&/hidden/.test(t.className)&&t.tagName.toLowerCase()=="a"){return}this.style.bottom="0px"};a.querySelector("a.r").addEventListener("click",function(){I(t,"out");localStorage["ad"+t]=+new Date;clearTimeout(R)});var o=document.querySelector("#"+t+"Float > a");if(o){o.setAttribute("onclick",o.getAttribute("onclick").replace("Not ",""))}}i=i||"into";if(D&&n){if(i=="into"){D.className="slideout";a.style.display="block"}else{D.className="";a.style.display="none"}}};var z=["adZhuFeng","adYideng","adHaiTang","adMW"].sort(function(){return Math.random()<=.5?1:-1}),F=0;var O=false;if([].map&&screen.width>1e3){var R=null;document.addEventListener("scroll",function(){clearTimeout(R);var t=z[F];if(!t||!e.$(t)){return}var i=localStorage["ad"+t],n=document.documentElement.scrollTop||document.body.scrollTop;if(i){var a=+new Date;if(t=="adYideng"&&a-i*1<864e5*3||t!="adYideng"&&a-i*1<864e5*30){F++;return}}var o=e.$(t),r=o.offsetTop<n+window.innerHeight;var l=o.eleClone;if(l){if(r){I(t,"out")}else{I(t)}}else if(O!=true){R=setTimeout(function(){if(!r){I(t);O=true}},6e3)}})}var W=screen.width,X=e.$("qrCode");if(W>480&&X){setTimeout(function(){X.innerHTML='<img src="http://qr.liantu.com/api.php?text='+location.href+'">'},3e3)}var P=e.$("adSlideX"),Z=e.$("adIndexX");if(P&&Z){var G=Z.getElementsByTagName("a");var J=G.length;var K=null,Q=0,U=P.parentNode.clientWidth||336;var V=false;var ee=[5e3,5e3,5e3];var te=function(){P.style.left=-1*Q*U+"px";ne()},ie=function(){K=setTimeout(function(){Q++;if(Q>=J){Q=0}te();ie()},ee[Q])},ne=function(){for(var e=0;e<J;e++){G[e].className="ad_index_a"}if(G[Q]){G[Q].className="ad_index_a active"}};if(screen.width>640){for(var ae=0;ae<J;ae++){G[ae].onmouseover=function(){Q=this.innerHTML*1-1;te()}}P.parentNode.onmouseover=function(){clearTimeout(K)};P.parentNode.onmouseout=function(){ie()}}ie()}})();